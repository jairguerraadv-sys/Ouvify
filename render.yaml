# Render.com Blueprint - Ouvify Backend
# https://render.com/docs/blueprint-spec
#
# ⚠️  DISASTER RECOVERY / BACKUP CONFIGURATION
# Este arquivo mantém configuração alternativa para deploy no Render.com
# Plataforma PRIMARY: Railway (via GitHub Actions)
# Use este apenas em caso de:
#   - Falha crítica no Railway
#   - Migração de plataforma
#   - Testes de infraestrutura
#
# Status: INATIVO (mantido para referência)
# Última revisão: 2026-02-05

databases:
  - name: ouvify-db
    plan: free
    databaseName: ouvify
    user: ouvify_user
    region: oregon

services:
  - type: web
    name: ouvify-backend
    runtime: python
    plan: free
    region: oregon
    branch: main
    rootDir: apps/backend
    buildCommand: ./build.sh
    startCommand: gunicorn config.wsgi:application --bind 0.0.0.0:$PORT --workers 2 --timeout 120
    healthCheckPath: /health/
    envVars:
      - key: PYTHON_VERSION
        value: 3.12.3
      - key: DEBUG
        value: "False"
      - key: DJANGO_SETTINGS_MODULE
        value: config.settings
      - key: ALLOWED_HOSTS
        value: ".onrender.com,.vercel.app"
      - key: CORS_ALLOWED_ORIGINS
        value: "https://ouvify.vercel.app,https://ouvify-frontend.vercel.app"
      - key: CORS_ALLOW_CREDENTIALS
        value: "True"
      - key: FRONTEND_URL
        value: "https://ouvify.vercel.app"
      - key: SECRET_KEY
        generateValue: true
      - key: DATABASE_URL
        fromDatabase:
          name: ouvify-db
          property: connectionString
      - key: WEB_CONCURRENCY
        value: "2"
